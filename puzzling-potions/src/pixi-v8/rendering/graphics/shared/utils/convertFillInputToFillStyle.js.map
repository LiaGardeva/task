{"version":3,"file":"convertFillInputToFillStyle.js","sources":["../../../../../src/rendering/graphics/shared/utils/convertFillInputToFillStyle.ts"],"sourcesContent":["import { Matrix } from '../../../../maths/Matrix';\nimport { convertColorToNumber } from '../../../../utils/color/convertColorToNumber';\nimport { Texture } from '../../../renderers/shared/texture/Texture';\nimport { FillGradient } from '../fill/FillGradient';\nimport { FillPattern } from '../fill/FillPattern';\n\nimport type { FillStyle, FillStyleInputs, PatternFillStyle } from '../GraphicsContext';\n\nexport function convertFillInputToFillStyle(value: FillStyleInputs, defaultStyle: FillStyle): FillStyle\n{\n    if (!value)\n    { return null; }\n\n    let fillStyleToParse: FillStyle;\n    let styleToMerge: FillStyleInputs;\n\n    if ((value as PatternFillStyle)?.fill)\n    {\n        styleToMerge = (value as PatternFillStyle).fill;\n        fillStyleToParse = { ...defaultStyle, ...(value as PatternFillStyle) };\n    }\n\n    else\n    {\n        styleToMerge = value;\n        fillStyleToParse = defaultStyle;\n    }\n\n    if (typeof styleToMerge === 'number' || typeof styleToMerge === 'string')\n    {\n        return {\n            ...fillStyleToParse,\n            color: convertColorToNumber(styleToMerge),\n            texture: Texture.WHITE,\n        };\n    }\n    else if (styleToMerge instanceof FillPattern)\n    {\n        const pattern = styleToMerge as FillPattern;\n\n        return {\n            ...fillStyleToParse,\n            color: 0xffffff,\n            texture: pattern.texture,\n            matrix: pattern.transform,\n        };\n    }\n\n    // // TODO Texture\n    else if (styleToMerge instanceof FillGradient)\n    {\n        const gradient = styleToMerge as FillGradient;\n\n        gradient.buildLinearGradient();\n\n        return {\n            ...fillStyleToParse,\n            color: 0xffffff,\n            texture: gradient.texture,\n            matrix: gradient.transform,\n        };\n    }\n\n    const style = { ...defaultStyle, ...(value as FillStyle) };\n\n    if (style.texture !== Texture.WHITE)\n    {\n        const m = style.matrix || new Matrix();\n\n        m.scale(\n            1 / style.texture.frameWidth,\n            1 / style.texture.frameHeight\n        );\n\n        style.matrix = m;\n\n        style.color = 0xffffff;\n    }\n\n    style.color = convertColorToNumber(style.color);\n\n    // its a regular fill style!\n    return style;\n}\n"],"names":["convertColorToNumber","Texture","FillPattern","FillGradient","Matrix"],"mappings":";;;;;;;;;;AAQgB,SAAA,2BAAA,CAA4B,OAAwB,YACpE,EAAA;AACI,EAAA,IAAI,CAAC,KACL,EAAA;AAAE,IAAO,OAAA,IAAA,CAAA;AAAA,GAAM;AAEf,EAAI,IAAA,gBAAA,CAAA;AACJ,EAAI,IAAA,YAAA,CAAA;AAEJ,EAAA,IAAK,OAA4B,IACjC,EAAA;AACI,IAAA,YAAA,GAAgB,KAA2B,CAAA,IAAA,CAAA;AAC3C,IAAA,gBAAA,GAAmB,EAAE,GAAG,YAAc,EAAA,GAAI,KAA2B,EAAA,CAAA;AAAA,GAIzE,MAAA;AACI,IAAe,YAAA,GAAA,KAAA,CAAA;AACf,IAAmB,gBAAA,GAAA,YAAA,CAAA;AAAA,GACvB;AAEA,EAAA,IAAI,OAAO,YAAA,KAAiB,QAAY,IAAA,OAAO,iBAAiB,QAChE,EAAA;AACI,IAAO,OAAA;AAAA,MACH,GAAG,gBAAA;AAAA,MACH,KAAA,EAAOA,0CAAqB,YAAY,CAAA;AAAA,MACxC,SAASC,eAAQ,CAAA,KAAA;AAAA,KACrB,CAAA;AAAA,GACJ,MAAA,IACS,wBAAwBC,uBACjC,EAAA;AACI,IAAA,MAAM,OAAU,GAAA,YAAA,CAAA;AAEhB,IAAO,OAAA;AAAA,MACH,GAAG,gBAAA;AAAA,MACH,KAAO,EAAA,QAAA;AAAA,MACP,SAAS,OAAQ,CAAA,OAAA;AAAA,MACjB,QAAQ,OAAQ,CAAA,SAAA;AAAA,KACpB,CAAA;AAAA,GACJ,MAAA,IAGS,wBAAwBC,yBACjC,EAAA;AACI,IAAA,MAAM,QAAW,GAAA,YAAA,CAAA;AAEjB,IAAA,QAAA,CAAS,mBAAoB,EAAA,CAAA;AAE7B,IAAO,OAAA;AAAA,MACH,GAAG,gBAAA;AAAA,MACH,KAAO,EAAA,QAAA;AAAA,MACP,SAAS,QAAS,CAAA,OAAA;AAAA,MAClB,QAAQ,QAAS,CAAA,SAAA;AAAA,KACrB,CAAA;AAAA,GACJ;AAEA,EAAA,MAAM,KAAQ,GAAA,EAAE,GAAG,YAAA,EAAc,GAAI,KAAoB,EAAA,CAAA;AAEzD,EAAI,IAAA,KAAA,CAAM,OAAY,KAAAF,eAAA,CAAQ,KAC9B,EAAA;AACI,IAAA,MAAM,CAAI,GAAA,KAAA,CAAM,MAAU,IAAA,IAAIG,aAAO,EAAA,CAAA;AAErC,IAAE,CAAA,CAAA,KAAA;AAAA,MACE,CAAA,GAAI,MAAM,OAAQ,CAAA,UAAA;AAAA,MAClB,CAAA,GAAI,MAAM,OAAQ,CAAA,WAAA;AAAA,KACtB,CAAA;AAEA,IAAA,KAAA,CAAM,MAAS,GAAA,CAAA,CAAA;AAEf,IAAA,KAAA,CAAM,KAAQ,GAAA,QAAA,CAAA;AAAA,GAClB;AAEA,EAAM,KAAA,CAAA,KAAA,GAAQJ,yCAAqB,CAAA,KAAA,CAAM,KAAK,CAAA,CAAA;AAG9C,EAAO,OAAA,KAAA,CAAA;AACX;;;;"}