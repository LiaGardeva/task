{"version":3,"file":"setProgramName.mjs","sources":["../../../../../../src/rendering/renderers/gl/shader/program/setProgramName.ts"],"sourcesContent":["const fragmentNameCache: { [key: string]: number } = {};\nconst VertexNameCache: { [key: string]: number } = {};\n\nexport function setProgramName(src: string, { name = `pixi-program` }: { name: string; }, isFragment = true)\n{\n    name = name.replace(/\\s+/g, '-');\n\n    name += isFragment ? '-fragment' : '-vertex';\n\n    const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n\n    if (nameCache[name])\n    {\n        nameCache[name]++;\n        name += `-${nameCache[name]}`;\n    }\n    else\n    {\n        nameCache[name] = 1;\n    }\n\n    // if it already contains the define return\n    if (src.indexOf('#define SHADER_NAME') !== -1) return src;\n\n    const shaderName = `#define SHADER_NAME ${name}`;\n\n    if (src.substring(0, 8) !== '#version')\n    {\n        return `${shaderName}\\n${src}`;\n    }\n\n    // get the first line break in the src\n    const firstLineBreak = src.indexOf('\\n');\n\n    // insert the precision statement after the first line\n    return `${src.substring(0, firstLineBreak + 1)}${shaderName}\\n${src.substring(firstLineBreak + 1)}`;\n}\n"],"names":[],"mappings":"AAAA,MAAM,oBAA+C,EAAC,CAAA;AACtD,MAAM,kBAA6C,EAAC,CAAA;AAE7C,SAAS,eAAe,GAAa,EAAA,EAAE,OAAO,CAAe,YAAA,CAAA,EAAA,EAAsB,aAAa,IACvG,EAAA;AACI,EAAO,IAAA,GAAA,IAAA,CAAK,OAAQ,CAAA,MAAA,EAAQ,GAAG,CAAA,CAAA;AAE/B,EAAA,IAAA,IAAQ,aAAa,WAAc,GAAA,SAAA,CAAA;AAEnC,EAAM,MAAA,SAAA,GAAY,aAAa,iBAAoB,GAAA,eAAA,CAAA;AAEnD,EAAI,IAAA,SAAA,CAAU,IAAI,CAClB,EAAA;AACI,IAAA,SAAA,CAAU,IAAI,CAAA,EAAA,CAAA;AACd,IAAQ,IAAA,IAAA,CAAA,CAAA,EAAI,UAAU,IAAI,CAAA,CAAA,CAAA,CAAA;AAAA,GAG9B,MAAA;AACI,IAAA,SAAA,CAAU,IAAI,CAAI,GAAA,CAAA,CAAA;AAAA,GACtB;AAGA,EAAI,IAAA,GAAA,CAAI,OAAQ,CAAA,qBAAqB,CAAM,KAAA,CAAA,CAAA;AAAI,IAAO,OAAA,GAAA,CAAA;AAEtD,EAAA,MAAM,aAAa,CAAuB,oBAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AAE1C,EAAA,IAAI,GAAI,CAAA,SAAA,CAAU,CAAG,EAAA,CAAC,MAAM,UAC5B,EAAA;AACI,IAAA,OAAO,CAAG,EAAA,UAAA,CAAA;AAAA,EAAe,GAAA,CAAA,CAAA,CAAA;AAAA,GAC7B;AAGA,EAAM,MAAA,cAAA,GAAiB,GAAI,CAAA,OAAA,CAAQ,IAAI,CAAA,CAAA;AAGvC,EAAA,OAAO,GAAG,GAAI,CAAA,SAAA,CAAU,CAAG,EAAA,cAAA,GAAiB,CAAC,CAAI,CAAA,EAAA,UAAA,CAAA;AAAA,EAAe,GAAA,CAAI,SAAU,CAAA,cAAA,GAAiB,CAAC,CAAA,CAAA,CAAA,CAAA;AACpG;;;;"}