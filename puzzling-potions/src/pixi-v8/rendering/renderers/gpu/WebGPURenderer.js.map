{"version":3,"file":"WebGPURenderer.js","sources":["../../../../src/rendering/renderers/gpu/WebGPURenderer.ts"],"sourcesContent":["import { extensions, ExtensionType } from '../../../extensions/Extensions';\nimport { GpuBatchAdaptor } from '../../batcher/gpu/GpuBatchAdaptor';\nimport { GpuGraphicsAdaptor } from '../../graphics/gpu/GpuGraphicsAdaptor';\nimport { GpuMeshAdapter } from '../../mesh/gpu/GpuMeshAdapter';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer';\nimport { SharedRenderPipes, SharedSystems } from '../shared/system/SharedSystems';\nimport { BindGroupSystem } from './BindGroupSystem';\nimport { BufferSystem } from './buffer/GpuBufferSystem';\nimport { GpuColorMaskSystem } from './GpuColorMaskSystem';\nimport { type GPU, GpuDeviceSystem } from './GpuDeviceSystem';\nimport { GpuEncoderSystem } from './GpuEncoderSystem';\nimport { GpuStencilSystem } from './GpuStencilSystem';\nimport { GpuUniformBatchPipe } from './GpuUniformBatchPipe';\nimport { GpuUniformBufferPipe } from './GpuUniformBufferPipe';\nimport { PipelineSystem } from './pipeline/PipelineSystem';\nimport { GpuRenderTargetSystem } from './renderTarget/GpuRenderTargetSystem';\nimport { GpuShaderSystem } from './shader/GpuShaderSystem';\nimport { GpuStateSystem } from './state/GpuStateSystem';\nimport { GpuTextureSystem } from './texture/GpuTextureSystem';\n\nimport type { PipeConstructor } from '../shared/instructions/RenderPipe';\nimport type { SystemConstructor } from '../shared/system/System';\nimport type { ExtractRendererOptions, ExtractSystemTypes } from '../shared/system/utils/typeUtils';\n\nconst DefaultWebGPUSystems = [\n    ...SharedSystems,\n    GpuDeviceSystem,\n    BufferSystem,\n    GpuTextureSystem,\n    GpuRenderTargetSystem,\n    GpuEncoderSystem,\n    GpuShaderSystem,\n    GpuStateSystem,\n    PipelineSystem,\n    GpuColorMaskSystem,\n    GpuStencilSystem,\n    BindGroupSystem,\n];\nconst DefaultWebGPUPipes = [...SharedRenderPipes, GpuUniformBatchPipe, GpuUniformBufferPipe];\nconst DefaultWebGPUAdapters = [GpuBatchAdaptor, GpuMeshAdapter, GpuGraphicsAdaptor];\n\n// installed systems will bbe added to this array by the extensions manager..\nconst systems: { name: string; value: SystemConstructor }[] = [];\nconst renderPipes: { name: string; value: PipeConstructor }[] = [];\nconst renderPipeAdaptors: { name: string; value: any }[] = [];\n\nextensions.handleByNamedList(ExtensionType.WebGPUSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGPUPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGPUPipesAdaptor, renderPipeAdaptors);\n\n// add all the default systems as well as any user defined ones from the extensions\nextensions.add(...DefaultWebGPUSystems, ...DefaultWebGPUPipes, ...DefaultWebGPUAdapters);\n\ntype WebGPUSystems = ExtractSystemTypes<typeof DefaultWebGPUSystems> &\nPixiMixins.RendererSystems &\nPixiMixins.WebGPUSystems;\n\nexport type WebGPUPipes = ExtractSystemTypes<typeof DefaultWebGPUPipes> &\nPixiMixins.RendererPipes &\nPixiMixins.WebGPUPipes;\n\nexport type WebGPUOptions = ExtractRendererOptions<typeof DefaultWebGPUSystems> &\nPixiMixins.RendererOptions &\nPixiMixins.WebGPUOptions;\n\nexport interface WebGPURenderer extends AbstractRenderer<WebGPUPipes, WebGPUOptions>, WebGPUSystems {}\n\nexport class WebGPURenderer extends AbstractRenderer<WebGPUPipes, WebGPUOptions> implements WebGPUSystems\n{\n    gpu: GPU;\n\n    constructor()\n    {\n        const systemConfig = {\n            type: 'webgpu',\n            systems,\n            renderPipes,\n            renderPipeAdaptors,\n        };\n\n        super(systemConfig);\n    }\n}\n"],"names":["SharedSystems","GpuDeviceSystem","BufferSystem","GpuTextureSystem","GpuRenderTargetSystem","GpuEncoderSystem","GpuShaderSystem","GpuStateSystem","PipelineSystem","GpuColorMaskSystem","GpuStencilSystem","BindGroupSystem","SharedRenderPipes","GpuUniformBatchPipe","GpuUniformBufferPipe","GpuBatchAdaptor","GpuMeshAdapter","GpuGraphicsAdaptor","extensions","ExtensionType","AbstractRenderer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA,MAAM,oBAAuB,GAAA;AAAA,EACzB,GAAGA,2BAAA;AAAA,EACHC,+BAAA;AAAA,EACAC,4BAAA;AAAA,EACAC,iCAAA;AAAA,EACAC,2CAAA;AAAA,EACAC,iCAAA;AAAA,EACAC,+BAAA;AAAA,EACAC,6BAAA;AAAA,EACAC,6BAAA;AAAA,EACAC,qCAAA;AAAA,EACAC,iCAAA;AAAA,EACAC,+BAAA;AACJ,CAAA,CAAA;AACA,MAAM,kBAAqB,GAAA,CAAC,GAAGC,+BAAA,EAAmBC,yCAAqBC,yCAAoB,CAAA,CAAA;AAC3F,MAAM,qBAAwB,GAAA,CAACC,+BAAiB,EAAAC,6BAAA,EAAgBC,qCAAkB,CAAA,CAAA;AAGlF,MAAM,UAAwD,EAAC,CAAA;AAC/D,MAAM,cAA0D,EAAC,CAAA;AACjE,MAAM,qBAAqD,EAAC,CAAA;AAE5DC,qBAAW,CAAA,iBAAA,CAAkBC,wBAAc,CAAA,YAAA,EAAc,OAAO,CAAA,CAAA;AAChED,qBAAW,CAAA,iBAAA,CAAkBC,wBAAc,CAAA,WAAA,EAAa,WAAW,CAAA,CAAA;AACnED,qBAAW,CAAA,iBAAA,CAAkBC,wBAAc,CAAA,kBAAA,EAAoB,kBAAkB,CAAA,CAAA;AAGjFD,qBAAA,CAAW,IAAI,GAAG,oBAAA,EAAsB,GAAG,kBAAA,EAAoB,GAAG,qBAAqB,CAAA,CAAA;AAgBhF,MAAM,uBAAuBE,iCACpC,CAAA;AAAA,EAGI,WACA,GAAA;AACI,IAAA,MAAM,YAAe,GAAA;AAAA,MACjB,IAAM,EAAA,QAAA;AAAA,MACN,OAAA;AAAA,MACA,WAAA;AAAA,MACA,kBAAA;AAAA,KACJ,CAAA;AAEA,IAAA,KAAA,CAAM,YAAY,CAAA,CAAA;AAAA,GACtB;AACJ;;;;"}