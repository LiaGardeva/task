{"version":3,"file":"logTexture.mjs","sources":["../../../../../../src/rendering/renderers/gpu/texture/utils/logTexture.ts"],"sourcesContent":["import { settings } from '../../../../../settings/settings';\n\nimport type { ICanvas } from '../../../../../settings/adapter/ICanvas';\nimport type { Texture } from '../../../shared/texture/Texture';\nimport type { WebGPURenderer } from '../../WebGPURenderer';\n\n// TODO this is very close code to logDebugTexture.. when adding extract, lets look into that!\n// useful for extracting data from a texture..\n// MAT: DO NOT USE THIS WHILST RENDERING! - weird things will happen..\n// use `logDebugTexture` instead\nexport function logTexture(texture: Texture, renderer: WebGPURenderer): ICanvas\n{\n    // // create a canvas with webGPU context\n    const commandEncoder = renderer.gpu.device.createCommandEncoder();// renderer.renderTarget.commandEncoder;\n\n    // create canvas\n    const canvas = settings.ADAPTER.createCanvas();\n\n    canvas.width = texture.source.pixelWidth;\n    canvas.height = texture.source.pixelHeight;\n\n    const context = canvas.getContext('webgpu') as unknown as GPUCanvasContext;\n\n    context.configure({\n        device: renderer.gpu.device,\n        // eslint-disable-next-line max-len\n        usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.COPY_SRC,\n        format: 'bgra8unorm',\n        alphaMode: 'opaque',\n    });\n\n    commandEncoder.copyTextureToTexture({\n        texture: renderer.texture.getGpuSource(texture.source),\n        origin: {\n            x: 0,\n            y: 0,\n        },\n    }, {\n        texture: context.getCurrentTexture(),\n    }, {\n        width: canvas.width,\n        height: canvas.height,\n    });\n\n    renderer.gpu.device.queue.submit([commandEncoder.finish()]);\n\n    return canvas;\n}\n"],"names":[],"mappings":";;AAUgB,SAAA,UAAA,CAAW,SAAkB,QAC7C,EAAA;AAEI,EAAA,MAAM,cAAiB,GAAA,QAAA,CAAS,GAAI,CAAA,MAAA,CAAO,oBAAqB,EAAA,CAAA;AAGhE,EAAM,MAAA,MAAA,GAAS,QAAS,CAAA,OAAA,CAAQ,YAAa,EAAA,CAAA;AAE7C,EAAO,MAAA,CAAA,KAAA,GAAQ,QAAQ,MAAO,CAAA,UAAA,CAAA;AAC9B,EAAO,MAAA,CAAA,MAAA,GAAS,QAAQ,MAAO,CAAA,WAAA,CAAA;AAE/B,EAAM,MAAA,OAAA,GAAU,MAAO,CAAA,UAAA,CAAW,QAAQ,CAAA,CAAA;AAE1C,EAAA,OAAA,CAAQ,SAAU,CAAA;AAAA,IACd,MAAA,EAAQ,SAAS,GAAI,CAAA,MAAA;AAAA;AAAA,IAErB,KAAA,EAAO,eAAgB,CAAA,QAAA,GAAW,eAAgB,CAAA,QAAA;AAAA,IAClD,MAAQ,EAAA,YAAA;AAAA,IACR,SAAW,EAAA,QAAA;AAAA,GACd,CAAA,CAAA;AAED,EAAA,cAAA,CAAe,oBAAqB,CAAA;AAAA,IAChC,OAAS,EAAA,QAAA,CAAS,OAAQ,CAAA,YAAA,CAAa,QAAQ,MAAM,CAAA;AAAA,IACrD,MAAQ,EAAA;AAAA,MACJ,CAAG,EAAA,CAAA;AAAA,MACH,CAAG,EAAA,CAAA;AAAA,KACP;AAAA,GACD,EAAA;AAAA,IACC,OAAA,EAAS,QAAQ,iBAAkB,EAAA;AAAA,GACpC,EAAA;AAAA,IACC,OAAO,MAAO,CAAA,KAAA;AAAA,IACd,QAAQ,MAAO,CAAA,MAAA;AAAA,GAClB,CAAA,CAAA;AAED,EAAS,QAAA,CAAA,GAAA,CAAI,OAAO,KAAM,CAAA,MAAA,CAAO,CAAC,cAAe,CAAA,MAAA,EAAQ,CAAC,CAAA,CAAA;AAE1D,EAAO,OAAA,MAAA,CAAA;AACX;;;;"}