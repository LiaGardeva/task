{"version":3,"file":"sortMixin.js","sources":["../../../../src/rendering/scene/container-mixins/sortMixin.ts"],"sourcesContent":["import type { Container } from '../Container';\n\nexport interface SortMixin\n{\n    _depth: 0;\n    depth: number;\n    sortDirty: boolean;\n    sortChildren: boolean;\n\n    sortChildrenDepth: () => void;\n}\n\nexport const sortMixin: Partial<Container> = {\n\n    _depth: 0,\n    sortDirty: false,\n    sortChildren: false,\n\n    get depth()\n    {\n        return this._depth;\n    },\n\n    /** The depth of the object. Setting this value, will automatically set the parent to be sortable */\n    set depth(value)\n    {\n        if (this._depth === value) return;\n\n        this._depth = value;\n\n        if (this.layerGroup && !this.isLayerRoot)\n        {\n            this.parent.sortChildren = true;\n            this.parent.sortDirty = true;\n\n            this.layerGroup.structureDidChange = true;\n        }\n    },\n\n    sortChildrenDepth()\n    {\n        if (!this.sortDirty) return;\n\n        this.sortDirty = false;\n\n        this.children.sort(sortChildren);\n    }\n\n} as Container;\n\nfunction sortChildren(a: Container, b: Container): number\n{\n    return a._depth - b._depth;\n}\n"],"names":[],"mappings":";;;;AAYO,MAAM,SAAgC,GAAA;AAAA,EAEzC,MAAQ,EAAA,CAAA;AAAA,EACR,SAAW,EAAA,KAAA;AAAA,EACX,YAAc,EAAA,KAAA;AAAA,EAEd,IAAI,KACJ,GAAA;AACI,IAAA,OAAO,IAAK,CAAA,MAAA,CAAA;AAAA,GAChB;AAAA;AAAA,EAGA,IAAI,MAAM,KACV,EAAA;AACI,IAAA,IAAI,KAAK,MAAW,KAAA,KAAA;AAAO,MAAA,OAAA;AAE3B,IAAA,IAAA,CAAK,MAAS,GAAA,KAAA,CAAA;AAEd,IAAA,IAAI,IAAK,CAAA,UAAA,IAAc,CAAC,IAAA,CAAK,WAC7B,EAAA;AACI,MAAA,IAAA,CAAK,OAAO,YAAe,GAAA,IAAA,CAAA;AAC3B,MAAA,IAAA,CAAK,OAAO,SAAY,GAAA,IAAA,CAAA;AAExB,MAAA,IAAA,CAAK,WAAW,kBAAqB,GAAA,IAAA,CAAA;AAAA,KACzC;AAAA,GACJ;AAAA,EAEA,iBACA,GAAA;AACI,IAAA,IAAI,CAAC,IAAK,CAAA,SAAA;AAAW,MAAA,OAAA;AAErB,IAAA,IAAA,CAAK,SAAY,GAAA,KAAA,CAAA;AAEjB,IAAK,IAAA,CAAA,QAAA,CAAS,KAAK,YAAY,CAAA,CAAA;AAAA,GACnC;AAEJ,EAAA;AAEA,SAAS,YAAA,CAAa,GAAc,CACpC,EAAA;AACI,EAAO,OAAA,CAAA,CAAE,SAAS,CAAE,CAAA,MAAA,CAAA;AACxB;;;;"}