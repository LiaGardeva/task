{"version":3,"file":"BitmapFontManager.mjs","sources":["../../../../src/rendering/text/bitmap/BitmapFontManager.ts"],"sourcesContent":["import { Cache } from '../../../assets/cache/Cache';\nimport { DynamicBitmapFont } from './DynamicBitmapFont';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout';\n\nimport type { TextStyle } from '../TextStyle';\nimport type { BitmapFont } from './BitmapFont';\nimport type { BitmapTextLayoutData } from './utils/getBitmapTextLayout';\n\nclass BitmapFontManagerClass\n{\n    getFont(text: string, style: TextStyle): BitmapFont\n    {\n        let fontFamilyKey = style.fontFamily as string;\n        let overrideFill = true;\n\n        // assuming there is no texture we can use a tint!\n        if (style._fill.fill)\n        {\n            fontFamilyKey += style._fill.fill.uid;\n            overrideFill = false;\n        }\n\n        // first get us the the right font...\n        if (!Cache.has(fontFamilyKey))\n        {\n            Cache.set(fontFamilyKey as string, new DynamicBitmapFont({\n                style,\n                overrideFill,\n            }));\n        }\n\n        const dynamicFont = Cache.get(fontFamilyKey);\n\n        (dynamicFont as DynamicBitmapFont).ensureCharacters?.(text);\n\n        return dynamicFont;\n    }\n\n    getLayout(text: string, style: TextStyle): BitmapTextLayoutData\n    {\n        const bitmapFont = this.getFont(text, style);\n\n        return getBitmapTextLayout(text.split(''), style, bitmapFont);\n    }\n\n    measureText(text: string, style: TextStyle): { width: number, height: number, scale: number, offsetY: number }\n    {\n        return this.getLayout(text, style);\n    }\n}\n\nexport const BitmapFontManager = new BitmapFontManagerClass();\n"],"names":[],"mappings":";;;;AAQA,MAAM,sBACN,CAAA;AAAA,EACI,OAAA,CAAQ,MAAc,KACtB,EAAA;AACI,IAAA,IAAI,gBAAgB,KAAM,CAAA,UAAA,CAAA;AAC1B,IAAA,IAAI,YAAe,GAAA,IAAA,CAAA;AAGnB,IAAI,IAAA,KAAA,CAAM,MAAM,IAChB,EAAA;AACI,MAAiB,aAAA,IAAA,KAAA,CAAM,MAAM,IAAK,CAAA,GAAA,CAAA;AAClC,MAAe,YAAA,GAAA,KAAA,CAAA;AAAA,KACnB;AAGA,IAAA,IAAI,CAAC,KAAA,CAAM,GAAI,CAAA,aAAa,CAC5B,EAAA;AACI,MAAM,KAAA,CAAA,GAAA,CAAI,aAAyB,EAAA,IAAI,iBAAkB,CAAA;AAAA,QACrD,KAAA;AAAA,QACA,YAAA;AAAA,OACH,CAAC,CAAA,CAAA;AAAA,KACN;AAEA,IAAM,MAAA,WAAA,GAAc,KAAM,CAAA,GAAA,CAAI,aAAa,CAAA,CAAA;AAE3C,IAAC,WAAA,CAAkC,mBAAmB,IAAI,CAAA,CAAA;AAE1D,IAAO,OAAA,WAAA,CAAA;AAAA,GACX;AAAA,EAEA,SAAA,CAAU,MAAc,KACxB,EAAA;AACI,IAAA,MAAM,UAAa,GAAA,IAAA,CAAK,OAAQ,CAAA,IAAA,EAAM,KAAK,CAAA,CAAA;AAE3C,IAAA,OAAO,oBAAoB,IAAK,CAAA,KAAA,CAAM,EAAE,CAAA,EAAG,OAAO,UAAU,CAAA,CAAA;AAAA,GAChE;AAAA,EAEA,WAAA,CAAY,MAAc,KAC1B,EAAA;AACI,IAAO,OAAA,IAAA,CAAK,SAAU,CAAA,IAAA,EAAM,KAAK,CAAA,CAAA;AAAA,GACrC;AACJ,CAAA;AAEa,MAAA,iBAAA,GAAoB,IAAI,sBAAuB;;;;"}